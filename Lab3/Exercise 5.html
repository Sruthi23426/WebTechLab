<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Multi-Stage Client-Side Form Workflow Engine</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #eef2f7;
        padding: 30px;
    }

    .container {
        width: 650px;
        margin: auto;
        background: #ffffff;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 0 12px rgba(0,0,0,0.15);
    }

    h2 {
        text-align: center;
        color: #2c3e50;
    }

    .stage {
        display: none;
    }

    .stage.active {
        display: block;
    }

    label {
        display: block;
        margin-top: 12px;
        font-weight: bold;
    }

    input, select {
        width: 100%;
        padding: 8px;
        margin-top: 6px;
    }

    .error {
        color: red;
        font-size: 13px;
    }

    .buttons {
        margin-top: 25px;
        display: flex;
        justify-content: space-between;
    }

    button {
        padding: 10px 20px;
        border: none;
        background: #3498db;
        color: white;
        cursor: pointer;
        border-radius: 4px;
        font-size: 14px;
    }

    button:disabled {
        background: gray;
        cursor: not-allowed;
    }

    .progress {
        width: 100%;
        background: #ddd;
        height: 12px;
        border-radius: 6px;
        margin-bottom: 25px;
    }

    .progress-bar {
        height: 12px;
        width: 0%;
        background: #27ae60;
        border-radius: 6px;
        transition: width 0.4s;
    }

    .success {
        text-align: center;
        font-size: 18px;
        color: green;
        margin-top: 30px;
    }
</style>
</head>

<body>

<div class="container">
    <h2>Multi-Stage Form Workflow</h2>

    <!-- Progress Bar -->
    <div class="progress">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Stage 1 -->
    <div class="stage active" id="stage1">
        <h3>Stage 1: Personal Information</h3>

        <label>Full Name</label>
        <input type="text" id="name">
        <div class="error" id="nameError"></div>

        <label>Email</label>
        <input type="email" id="email">
        <div class="error" id="emailError"></div>
    </div>

    <!-- Stage 2 -->
    <div class="stage" id="stage2">
        <h3>Stage 2: Academic Details</h3>

        <label>University Name</label>
        <input type="text" id="university">
        <div class="error" id="universityError"></div>

        <label>Year of Study</label>
        <select id="year">
            <option value="">Select</option>
            <option>1st Year</option>
            <option>2nd Year</option>
            <option>3rd Year</option>
            <option>4th Year</option>
        </select>
        <div class="error" id="yearError"></div>
    </div>

    <!-- Stage 3 -->
    <div class="stage" id="stage3">
        <h3>Stage 3: Skills & Experience</h3>

        <label>Primary Skill</label>
        <input type="text" id="skill">
        <div class="error" id="skillError"></div>

        <label>Experience (Years)</label>
        <input type="number" id="experience">
        <div class="error" id="experienceError"></div>
    </div>

    <!-- Stage 4 -->
    <div class="stage" id="stage4">
        <h3>Stage 4: Final Confirmation</h3>

        <label>Why should we select you? (Min 20 characters)</label>
        <input type="text" id="reason">
        <div class="error" id="reasonError"></div>
    </div>

    <!-- Success -->
    <div class="stage" id="successStage">
        <div class="success">
            âœ… Form Submitted Successfully! 
        </div>
    </div>

    <!-- Buttons -->
    <div class="buttons">
        <button id="prevBtn" onclick="prevStage()" disabled>Previous</button>
        <button id="nextBtn" onclick="nextStage()">Next</button>
    </div>
</div>

<script>
    let currentStage = 1;

    /* Temporary storage */
    let formData = {};

    function showStage(stage) {
        document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
        document.getElementById('stage' + stage).classList.add('active');

        document.getElementById('prevBtn').disabled = stage === 1;
        document.getElementById('nextBtn').innerText = stage === 4 ? 'Submit' : 'Next';

        document.getElementById('progressBar').style.width = ((stage - 1) / 4) * 100 + '%';
    }

    function nextStage() {
        if (!validateStage()) return;

        saveData();

        if (currentStage < 4) {
            currentStage++;
            showStage(currentStage);
        } else {
            document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
            document.getElementById('progressBar').style.width = '100%';
            document.getElementById('successStage').classList.add('active');
            document.getElementById('prevBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
        }
    }

    function prevStage() {
        currentStage--;
        showStage(currentStage);
    }

    function validateStage() {
        let valid = true;
        document.querySelectorAll('.error').forEach(e => e.innerText = '');

        if (currentStage === 1) {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;

            if (name.length < 3) {
                document.getElementById('nameError').innerText = "Name must be at least 3 characters";
                valid = false;
            }
            if (!email.includes('@')) {
                document.getElementById('emailError').innerText = "Invalid email format";
                valid = false;
            }
        }

        if (currentStage === 2) {
            if (document.getElementById('university').value === "") {
                document.getElementById('universityError').innerText = "University is required";
                valid = false;
            }
            if (document.getElementById('year').value === "") {
                document.getElementById('yearError').innerText = "Select year of study";
                valid = false;
            }
        }

        if (currentStage === 3) {
            if (document.getElementById('skill').value === "") {
                document.getElementById('skillError').innerText = "Skill is required";
                valid = false;
            }
            if (document.getElementById('experience').value <= 0) {
                document.getElementById('experienceError').innerText = "Experience must be greater than 0";
                valid = false;
            }
        }

        if (currentStage === 4) {
            if (document.getElementById('reason').value.length < 20) {
                document.getElementById('reasonError').innerText = "Minimum 20 characters required";
                valid = false;
            }
        }

        return valid;
    }

    function saveData() {
        formData = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            university: document.getElementById('university').value,
            year: document.getElementById('year').value,
            skill: document.getElementById('skill').value,
            experience: document.getElementById('experience').value,
            reason: document.getElementById('reason').value
        };
    }
</script>

</body>
</html>
